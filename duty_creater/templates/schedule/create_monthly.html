{% extends 'base.html' %}
{% load custom_tags %}

{% block content %}
<h1>{{ year}}년 {{ month }}월의 듀티 생성</h1>


{% for team_duty_list in team_duties %}
  <table class="table text-center">
    <thead>
      <tr>
        <th colspan="32">{{ forloop.counter }}팀의 한달 일정</th>
      </tr>
      <tr>
        <td></td>
        {% for day in days %}  
        <td>{{ day }}</td>
        {% endfor %}
      </tr>
      <tr>
        <td></td>
        {% for weekday in weekdays %}  
        {% if weekday == 'Sun' %}
        <td style="color:#e00404;">{{ weekday }}</td>
        {% elif weekday == 'Sat' %}
        <td style="color:#0094fe;">{{ weekday }}</td>
        {% else %}
        <td>{{ weekday }}</td>
        {% endif %}
        {% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for team_duty in team_duty_list %}
        {% for nurse_name, duties in team_duty.items %}
        <tr>
          <td>{{ nurse_name }}</td>

          {% for duty in duties %}

          {% if duty == 0 %}
          <td>/</td>
          {% elif duty == 1 %}
          <td style="background-color:#afd0b3;">D</td>
          {% elif duty == 2 %}
          <td style="background-color:#7eb485;">E</td>
          {% else %}
          <td style="background-color:#5a9861;">N</td>
          {% endif %}

          {% endfor %}

        </tr>
        {% endfor %}
      {% endfor %}
    </tbody>
  </table>
  <br>
{% endfor %}


{% comment %} 
<table class="table text-center">
  <thead>
    <tr>
      <th colspan="32">1팀의 한달 일정</th>
    </tr>
    <tr>
      <td></td>
      {# 숫자 2는 간호사 pk2, 31의 길이를 가져오기 위해 사용 하지만 수정 필요 2번 간호사가 항상 있지는 않을테니 #}
      {% for duty in dict_duties.2 %}  
      <td>{{ forloop.counter }}</td>
      {% endfor %}
    </tr>
    <tr>
      <td></td>
      {% for weekday in weekdays %}  
      {% if weekday == 'Sun' %}
      <td style="color:#e00404;">{{ weekday }}</td>
      {% elif weekday == 'Sat' %}
      <td style="color:#0094fe;">{{ weekday }}</td>
      {% else %}
      <td>{{ weekday }}</td>
      {% endif %}
      {% endfor %}
    </tr>
  </thead>
  <tbody>
    {% for nurse_pk, nurse_name in nurse_names %}
    <tr>
      <td>{{ nurse_name }}</td>

      {% for duty in dict_duties|get_item:nurse_pk %}

      {% if duty == 0 %}
      <td>{{ duty }}</td>
      {% elif duty == 1 %}
      <td style="background-color:#66cc00;">{{ duty }}</td>
      {% elif duty == 2 %}
      <td style="background-color:#4d9900;">{{ duty }}</td>
      {% else %}
      <td style="background-color:#408000;">{{ duty }}</td>
      {% endif %}

      {% endfor %}

    </tr>
    {% endfor %}
  </tbody>
</table> 
{% endcomment %}

<form action="{% url 'schedule:create_monthly' start_date %}" method="POST">
  {% csrf_token %}
  <button class="btn btn-outline-success" style="float: right;">확정</button>
</form>

<a href="{% url 'schedule:create_monthly' start_date %}">
  <button class="btn btn-outline-success mx-2" style="float: right;">재생성</button>
</a>



{% endblock content %}

